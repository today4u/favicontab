"use strict";var _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e};!function(r){var o={};function t(e){if(o[e])return o[e].exports;var n=o[e]={i:e,l:!1,exports:{}};return r[e].call(n.exports,n,n.exports,t),n.l=!0,n.exports}t.m=r,t.c=o,t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{enumerable:!0,get:r})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(n,e){if(1&e&&(n=t(n)),8&e)return n;if(4&e&&"object"===(void 0===n?"undefined":_typeof(n))&&n&&n.__esModule)return n;var r=Object.create(null);if(t.r(r),Object.defineProperty(r,"default",{enumerable:!0,value:n}),2&e&&"string"!=typeof n)for(var o in n)t.d(r,o,function(e){return n[e]}.bind(null,o));return r},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,n){return Object.prototype.hasOwnProperty.call(e,n)},t.p="",t(t.s="./src/js/installed.js")}({"./src/js/const.js":function srcJsConstJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony default export */ __webpack_exports__[\"default\"] = ({\n    idPrefix:        'bid',\n    positionPrefix:  'positions',\n    notExistPrefix:  'notexists',\n    initFolderTitle: 'FaviconTabFolder'\n});\n\n\n//# sourceURL=webpack:///./src/js/const.js?")},"./src/js/installed.js":function srcJsInstalledJs(module,__webpack_exports__,__webpack_require__){eval("__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _modules_installed__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ./modules/installed */ \"./src/js/modules/installed.js\");\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(/*! ./const */ \"./src/js/const.js\");\n\n\n//const INIT_FOLDER_TITLE = 'FaviconTabFolder';\n\n//拡張機能インストール時に実行\nchrome.runtime.onInstalled.addListener(function() {\n  //初期値をセット\n  _modules_installed__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initLocalStrage('backgroundColor', '#ffffff');\n  _modules_installed__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initLocalStrage('linkTarget',      0);\n  _modules_installed__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initLocalStrage('placement',       0);\n  _modules_installed__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initLocalStrage('folderType',      0);\n  _modules_installed__WEBPACK_IMPORTED_MODULE_0__[\"default\"].initLocalStrage('useFolder',       0);\n  //順番に実行\n  Promise.resolve()\n      .then(function(){\n          return new Promise(function(resolve, reject){\n              chrome.bookmarks.getTree(function(roots){\n                roots.forEach(parser);\n                function parser(node){\n                  if (node.children) {\n                    if(node.title === _const__WEBPACK_IMPORTED_MODULE_1__[\"default\"].initFolderTitle) {\n                      resolve(node.id);\n                      return true;\n                    }\n                    node.children.forEach(parser);\n                  }\n                }\n                reject();\n              });\n          });\n      })\n      .then(function(id){\n          return new Promise(function(resolve, reject){\n              //初期フォルダーに指定\n              localStorage.setItem('useFolder', id);\n          });\n      })\n      .catch(function(){\n          chrome.bookmarks.create({\"title\": _const__WEBPACK_IMPORTED_MODULE_1__[\"default\"].initFolderTitle},function(newFolder) {\n              localStorage.setItem('useFolder', newFolder.id);\n          });  \n      });\n  //useFolder\n  /*\n  (function() {\n    return new Promise(function(resolve, reject) {\n      chrome.bookmarks.getTree(function(roots){\n        var folders  = []; \n        roots.forEach(parser);\n        function parser(node){\n          if (node.children) {\n            if(node.title === INIT_FOLDER_TITLE) {\n              resolve(node.id);\n              return true;\n            }\n            node.children.forEach(parser);\n          }\n        }\n        reject();\n      });\n    });\n  })().then(function(id){\n    //resolve\n    localStorage.setItem('useFolder', id);\n  },function(){\n    //reject\n    //新規作成フォルダ情報が無い場合は、新規作成し,作成したfolderのidをlocalStorageに保存\n    chrome.bookmarks.create({\"title\": INIT_FOLDER_TITLE},function(newFolder) {\n      localStorage.setItem('useFolder', newFolder.id);\n    });\n  });*/\n});\n\n\n\n//# sourceURL=webpack:///./src/js/installed.js?")},"./src/js/modules/installed.js":function srcJsModulesInstalledJs(module,__webpack_exports__,__webpack_require__){eval('__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var _const__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(/*! ../const */ "./src/js/const.js");\n\n\n/* harmony default export */ __webpack_exports__["default"] = ({\n    initLocalStrage: function(name, value) {\n        if(localStorage.getItem(name) === null) {\n            localStorage.setItem(name,value);\n        }\n    }\n});\n\n\n\n//# sourceURL=webpack:///./src/js/modules/installed.js?')}});