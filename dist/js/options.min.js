"use strict";var jsonPath="../json/options.json",buildUseFolder=function(){chrome.bookmarks.getTree(function(e){var n=[];e.forEach(function e(t){t.children&&("0"!=t.id&&n.push({value:t.id,index:t.index,label:t.title,parentId:t.parentId}),t.children.forEach(e))}),buildOptionSettingRadio("useFolder",n)});var t=new XMLHttpRequest;t.onreadystatechange=function(){if(4===t.readyState&&200===t.status){var e=JSON.parse(t.responseText);buildOptionSettingRadio("placement",e.placement),buildOptionSettingRadio("folderType",e.folderType),buildOptionSettingRadio("linkTarget",e.linkTarget)}},t.open("GET",jsonPath,!0),t.send(null);var e=document.getElementById("backgroundColor");e.setAttribute("value",localStorage.backgroundColor),e.addEventListener("change",function(e){localStorage.backgroundColor=e.target.value})};function buildOptionSettingRadio(o,e){var d=document.getElementById(o);e.forEach(function(e){var t=document.createElement("label"),n=document.createElement("input"),a=document.createTextNode(e.label);n.setAttribute("value",e.value),n.setAttribute("type","radio"),n.setAttribute("name",o),void 0!==e.id&&n.setAttribute("id",e.id),localStorage[o]==e.value&&n.setAttribute("checked","checked"),t.appendChild(n),t.appendChild(a),d.appendChild(t)}),d.addEventListener("click",function(e){"input"===e.target.localName&&(localStorage[o]=e.target.value,setDisabled())})}var setDisabled=function(){var e=document.getElementById("folderType");"1"===localStorage.getItem("placement")?(localStorage.setItem("folderType",0),document.getElementById("folderType0")&&(document.getElementById("folderType0").checked=!0),e.setAttribute("disabled","disabled")):e.removeAttribute("disabled")},promise=Promise.resolve();promise.then(buildUseFolder()).then(setDisabled());